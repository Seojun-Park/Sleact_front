"use strict";(self.webpackChunksleact_front=self.webpackChunksleact_front||[]).push([[885],{2309:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(7294),r=a(3682),i=a(8401),o=a(1753);const l={ChatArea:(0,i.Z)("div",{target:"eiw1ha65"})({name:"ra6cyy",styles:"display:flex;width:100%;padding:20px;padding-top:0"}),Form:(0,i.Z)("form",{target:"eiw1ha64"})({name:"33ihw2",styles:"color:rgb(29, 28, 29);font-size:15px;width:100%;border-radius:4px;border:1px solid rgb(29, 28, 29)"}),MentionsTextarea:(0,i.Z)(o.r,{target:"eiw1ha63"})({name:"bka2jr",styles:"font-family:Slack-Lato,appleLogo,sans-serif;font-size:15px;padding:8px 9px;width:100%;& strong{background:skyblue;}& textarea{height:44px;padding:9px 10px!important;outline:none!important;border-radius:4px!important;resize:none!important;line-height:22px;border:none;}& ul{border:1px solid lightgray;max-height:200px;overflow-y:auto;padding:9px 10px;background:white;border-radius:4px;width:150px;}"}),Toolbox:(0,i.Z)("div",{target:"eiw1ha62"})({name:"13ie2qx",styles:"position:relative;background:rgb(248, 248, 248);height:41px;display:flex;border-top:1px solid rgb(221, 221, 221);align-items:center;border-bottom-left-radius:4px;border-bottom-right-radius:4px"}),SendButton:(0,i.Z)("button",{target:"eiw1ha61"})({name:"xrrdm2",styles:"position:absolute;right:5px;top:5px"}),EachMention:(0,i.Z)("button",{target:"eiw1ha60"})("padding:4px 20px;background:transparent;border:none;display:flex;align-items:center;color:rgb(28, 29, 28);width:100%;& img{margin-right:5px;}",(({focus:e})=>e&&"\n    background: #1264a3;\n    color: white;\n  "),";")};var s=a(6182),c=a.n(s),d=a(5723),p=a(3564),u=a(5977);const m=({chat:e,onSubmitForm:t,onChangechat:a,placeholder:i})=>{const s=(0,n.useRef)(null),{workspace:m}=(0,u.UO)(),{data:g,error:h,revalidate:x,mutate:b}=(0,d.ZP)("/api/users",p.Z,{dedupingInterval:1e3}),{data:f}=(0,d.ZP)(g?`/api/workspaces/${m}/members`:null,p.Z);(0,n.useEffect)((()=>{s.current&&(0,r.Z)(s.current)}),[s.current]);const y=(0,n.useCallback)((e=>{"Enter"===e.key&&(e.shiftKey||(e.preventDefault(),t(e)))}),[e]),w=(0,n.useCallback)(((e,t,a,r,i)=>{if(f)return n.createElement(l.EachMention,{focus:i},n.createElement("img",{src:c().url(f[r].email,{s:"20px",d:"retro"}),alt:f[r].nickname}),n.createElement("span",null,a))}),[f]);return n.createElement(l.ChatArea,null,n.createElement(l.Form,{onSubmit:t},n.createElement(l.MentionsTextarea,{id:"editor-chat",value:e,onChange:a,onKeyDown:y,placeholder:i,inputRef:s,allowSuggestionsAboveCursor:!0},n.createElement(o.p,{appendSpaceOnAdd:!0,trigger:"@",data:(null==f?void 0:f.map((e=>({id:e.id,display:e.nickname}))))||[],renderSuggestion:w})),n.createElement(l.Toolbox,null,n.createElement(l.SendButton,{className:"c-button-unstyled c-icon_button c-icon_button--light c-icon_button--size_medium c-texty_input__button c-texty_input__button--send"+(null!=e&&e.trim()?"":" c-texty_input__button--disabled"),"data-qa":"texty_send_button","aria-label":"Send message","data-sk":"tooltip_parent",type:"submit",disabled:!(null!=e&&e.trim())},n.createElement("i",{className:"c-icon c-icon--paperplane-filled","aria-hidden":"true"})))))}},2545:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(7294),r=a(6182),i=a.n(r),o=a(8401);const l={Wrapper:(0,o.Z)("div",{target:"exz632q0"})({name:"1hfzoyi",styles:"display:flex;padding:8px 20px;&:hover{background:#eee;}& .chat-img{display:flex;width:36px;margin-right:9px;& img{width:36px;height:36px;}}"})};var s=a(7484),c=a.n(s),d=a(8817),p=a(3727),u=a(5977);const m=({data:e})=>{const{workspace:t}=(0,u.UO)(),a="Sender"in e?e.Sender:e.User,r=(0,n.useMemo)((()=>(0,d.Z)({input:e.content,pattern:/@\[(.+?)\]\((\d+?)\)|\n/g,decorator(e,a){const r=e.match(/@\[(.+?)\]\((\d+?)\)/);return r?n.createElement(p.rU,{key:e+a,to:`/workspace/${t}/dm/${r[2]}`},"@",r[1]):n.createElement("br",{key:a})}})),[e.content]);return n.createElement(l.Wrapper,null,n.createElement("div",{className:"chat-img"},n.createElement("img",{src:i().url(a.email,{s:"36px",d:"retro"}),alt:a.nickname})),n.createElement("div",{className:"chat-text"},n.createElement("div",{className:"chat-user"},n.createElement("b",null,a.nickname),n.createElement("span",null,c()(e.createdAt).format(" h:mm A"))),n.createElement("p",null,r)))},g=(0,n.memo)(m),h={ChatZone:(0,o.Z)("div",{target:"e1sfewi02"})({name:"1op36e9",styles:"width:100%;display:flex;flex:1"}),Section:(0,o.Z)("section",{target:"e1sfewi01"})({name:"10zp55f",styles:"margin-top:20px;border-top:1px solid #eee"}),StickyHeader:(0,o.Z)("div",{target:"e1sfewi00"})({name:"16cu5ak",styles:"display:flex;justify-content:center;flex:1;width:100%;position:sticky;top:14px;& button{font-weight:bold;font-size:13px;height:28px;line-height:27px;padding:0 16px;z-index:2;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 1px 3px 0 rgba(0, 0, 0, 0.08);border-radius:24px;position:relative;top:-13px;background:white;border:none;outline:none;}"})};var x=a(1298);const b=({chatSections:e,setSize:t,isReachingEnd:a,scrollRef:r})=>{const i=(0,n.useCallback)((e=>{0!==e.scrollTop||a||t((e=>e+1)).then((()=>{var t,a;null!=r&&r.current&&(null===(t=r.current)||void 0===t||t.scrollTop((null===(a=r.current)||void 0===a?void 0:a.getScrollHeight())-e.scrollHeight))}))}),[]);return n.createElement(h.ChatZone,null,n.createElement(x.$B,{autoHide:!0,ref:r,onScrollFrame:i},Object.entries(e).map((([e,t])=>n.createElement(h.Section,{className:`section-${e}`,key:e},n.createElement(h.StickyHeader,null,n.createElement("button",null,e)),t.map((e=>n.createElement(g,{key:e.id,data:e}))))))))}},9498:(e,t,a)=>{a.d(t,{u:()=>r});var n=a(8401);const r={Container:(0,n.Z)("div",{target:"euua2hm2"})({name:"1a0r0eh",styles:"display:flex;flex-wrap:wrap;height:calc(100vh - 38px);flex-flow:column;position:relative"}),Header:(0,n.Z)("header",{target:"euua2hm1"})({name:"1vvj4nd",styles:"height:64px;display:flex;width:100%;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 1px 0 var(--saf-0);padding:20px 16px 20px 20px;font-weight:bold;align-items:center;& img{margin-right:5px;}& .header-right{display:flex;flex:1;justify-content:flex-end;align-items:center;}"}),DragOver:(0,n.Z)("div",{target:"euua2hm0"})({name:"czjct4",styles:"position:absolute;top:64px;left:0;width:100%;height:calc(100% - 64px);background:white;opacity:0.7;display:flex;align-items:center;justify-content:center;font-size:40px"})}},8667:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7484),r=a.n(n);function i(e){const t={};return e.forEach((e=>{const a=r()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[a])?t[a].push(e):t[a]=[e]})),t}}}]);